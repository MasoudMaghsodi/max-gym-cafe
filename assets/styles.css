:root { color-scheme: dark light; }
html { scroll-behavior: smooth; }
body { font-family: 'Vazirmatn', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Noto Sans", "Helvetica Neue", Arial; }

/* Performance */
.content-auto { content-visibility: auto; contain-intrinsic-size: 1000px 800px; }

/* Background */
.bg-base { background: radial-gradient(1200px 600px at 10% -10%, rgba(17,197,198,.18), transparent 60%),
                     radial-gradient(900px 600px at 90% 20%, rgba(253,224,71,.14), transparent 60%),
                     linear-gradient(180deg, #0b0c10 0%, #0b0c10 100%); }
.bg-ornament {
  position: fixed; inset: -10% -10% auto -10%;
  height: 55vh; filter: blur(60px); pointer-events: none; z-index: 0;
  background: radial-gradient(500px 300px at 70% 0%, rgba(35,217,151,.22), transparent 60%),
              radial-gradient(420px 260px at 20% 30%, rgba(17,197,198,.25), transparent 60%);
  animation: floaty 12s ease-in-out infinite alternate;
}
@keyframes floaty { from { transform: translateY(0px) } to { transform: translateY(24px) } }

/* Hide scrollbars on mobile (only) */
.no-scrollbar::-webkit-scrollbar{display:none}
.no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}

/* Hero title & Search */
.hero-title { font-weight:800; line-height:1.27; font-size: clamp(22px, 5vw, 38px); max-width: 28ch; }
.search-input { font-size: clamp(14px, 2.8vw, 16px); }

/* Header grid: align left block (brand+tag) and right block (nav) neatly on desktop, stacked on mobile */
.header-grid { display: grid; grid-template-columns: 1fr auto; align-items: center; }
@media (max-width: 768px){ .header-grid { grid-template-columns: 1fr; gap: 12px; } }
.header-grid .reveal { margin: 0; }
.header-grid #carousel { margin-left: 0; }

/* allow header children to shrink to avoid overflow */
.header-grid > * { min-width: 0; }

/* hero title wrapping improvements for long RTL text */
.hero-title { overflow-wrap: break-word; word-break: break-word; hyphens: auto; }

/* Increase hit area for admin button on touch */
#adminOpen { padding: .5rem .75rem; border-radius: 10px; }

/* Chips (as selectable tags) */
.chips-scroll { scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch; }
.chips-scroll { overscroll-behavior-x: contain; }
.chips-scroll.touch-pan-x { touch-action: pan-x; }
.chip {
  padding:.5rem .9rem; border-radius:9999px; white-space:nowrap;
  border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.06);
  transition: transform .15s ease, box-shadow .15s ease, background .15s ease;
}
.chip:active { transform: scale(.98); }
.chip.active { outline:2px solid #11c5c666; background:#11c5c61a; }

/* separators between chips */
.chip + .chip { position: relative; }
.chip + .chip::before { content:''; position: absolute; left: -6px; top: 8px; bottom: 8px; width:1px; background: rgba(255,255,255,.06); border-radius:1px; }

/* chip as accessible button */
.chip { border:0; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; }
.chip:focus { box-shadow: 0 0 0 4px rgba(17,197,198,.12); outline: none; }

/* Category collapse on small screens */
/* removed cat-toggle UI - categories always visible */

/* Menu section divider */
.menu-section { padding-bottom: 18px; border-bottom: 1px solid rgba(255,255,255,.04); margin-bottom:18px; }

/* product-item wrapper and uniform card sizing */
.product-item { display:flex; }
.product-card { width:100%; display:flex; flex-direction:column; }
.card-media { flex: 0 0 auto; }
.card-body { flex: 1 1 auto; }
.product-card { min-height: 220px; }
@media (min-width:640px){ .product-card { min-height: 320px; } }

/* make grid items equal height using flex */
.cat-grid { align-items:stretch; }
.cat-grid > * { display:flex; }
.cat-grid .product-item > * { height:100%; }

/* visual divider between tag groups (in header or between sections) */
.menu-section + .menu-section { border-top: 1px solid rgba(255,255,255,.03); }

/* ensure carousel doesn't cause horizontal overflow */
#carousel { overflow:hidden; }
#cTrack { max-width: 100%; box-sizing: border-box; }

@media (max-width: 400px){
  .chips-scroll { flex-wrap: wrap; gap:8px; max-height: 8rem; overflow-y:auto; }
}

/* iPhone 14 Pro Max approx width 430px - tighten hero and carousel */
@media (max-width: 430px){
  .hero-title { font-size: clamp(20px, 6.5vw, 28px); max-width: 32ch; }
  /* slightly smaller carousel cards on very narrow screens to avoid overflow/stretched look */
  .carousel-card { min-width: 78vw; max-width: 78vw; }
  .carousel-track { padding:4px; }
}

@media (max-width:640px){
  #adminOpen { padding:.45rem .6rem; font-size:13px; }
}

/* Make search input larger on small screens and shrink on large */
.search-input { width: 100%; font-size: clamp(14px, 3.5vw, 16px); }

/* Back-to-top floating button: more visible on mobile */
.back-top { right:12px; bottom:14px; left:auto; position:fixed; z-index:60; width:46px; height:46px; border-radius:12px; display:grid; place-items:center; font-weight:700; }
.back-top { background:#11c5c6; color:#000; border:1px solid rgba(0,0,0,.08); box-shadow: 0 8px 20px rgba(0,0,0,.22); }
.back-top svg { display:block }
.back-top:focus { outline: none; box-shadow: 0 0 0 6px rgba(17,197,198,.12); }

/* Footer: stack on mobile, better spacing */
footer#contact .max-w-6xl { gap:12px; }
@media (max-width:640px){
  footer#contact .grid { grid-template-columns: 1fr; }
  footer#contact a.underline { word-break: break-word; }
}

/* Carousel: allow touch pan and smoother drag */
.carousel-track { -webkit-overflow-scrolling: touch; touch-action: pan-x; overscroll-behavior-x: contain; box-sizing:border-box; padding:6px; }
.carousel-card { flex: 0 0 auto; min-width: clamp(180px, 70vw, 320px); max-width: clamp(180px, 70vw, 320px); }
@media (min-width: 640px){ .carousel-card { min-width: 260px; max-width: 260px; } }

/* Modal */
dialog::backdrop { background: rgba(0,0,0,.55); }
.modal { width: 100%; max-width: none; border: 0; background: transparent; padding: 0; }
.modal-card { width: 96vw; max-width: 960px; margin: 6vh auto; background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12); border-radius: 20px; overflow: hidden; backdrop-filter: blur(8px); }
.modal-head { display:flex; align-items:center; justify-content:space-between; padding: 12px 16px;
  background: rgba(255,255,255,.06); border-bottom: 1px solid rgba(255,255,255,.08); }
.modal-body { padding: 16px; }

/* Buttons */
.btn { padding:.55rem .9rem; border-radius:12px; background: #11c5c6; color:#000; font-weight: 700; }
.btn.ghost { background: rgba(255,255,255,.1); color:#fff; border: 1px solid rgba(255,255,255,.12); }

/* Toast */
.toast { position: fixed; inset-inline-start: 12px; inset-block-end: 12px;
  background: #0d9488; color:#fff; padding:.6rem .9rem; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,.2); z-index: 80; max-width: 90vw; }

/* Reveal */
.reveal { opacity:0; transform: translateY(16px); }
.reveal.revealed { opacity:1; transform:none; transition: opacity .4s ease, transform .4s cubic-bezier(.2,.7,.2,1); }
.reveal.scale { transform: scale(.985); }
.reveal.scale.revealed { transform: scale(1); }

/* Cards */
.card-hover { transition: transform .18s cubic-bezier(.2,.7,.2,1), box-shadow .18s ease; }

/* Carousel: horizontally scrollable + snap */
.carousel-track {
  display:flex; gap:12px; will-change: scroll-position;
  overflow-x:auto; scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch;
  touch-action: pan-x; padding: 2px;
}
.carousel-track { align-items: center; }
.carousel-card {
  border-radius: 16px; overflow: hidden; background: #fff; color:#000; border: 1px solid rgba(0,0,0,.08);
  transform-origin: center; scroll-snap-align: start; min-width: 82vw;
}
@media (min-width: 640px){ .carousel-card { min-width: 260px; max-width: 260px; } }
.carousel-dot { width:8px; height:8px; border-radius:9999px; background: rgba(255,255,255,.45); transition: width .2s ease, background .2s ease; }
.carousel-dot.active { width:20px; background:#11c5c6; }
.carousel-progress { height:3px; width:100%; background: rgba(255,255,255,.25); border-radius: 9999px; overflow:hidden; }
.carousel-progress > span { display:block; height:100%; width:0%; background:#23D997; transition: width .1s linear; }

/* Controls container added by JS: center dots under the carousel track and give small spacing */
.carousel-controls { display:flex; flex-direction:column; align-items:center; justify-content:center; }
.carousel-controls .carousel-dots { margin: 6px 0 0 0; }
.carousel-controls .carousel-progress { width: 90%; max-width: 420px; }

/* Back-to-top button */
.back-top {
  position: fixed; inset-inline-end: 12px; inset-block-end: 14px; z-index:60;
  width:42px; height:42px; border-radius:9999px; background:#11c5c6; color:#000; font-size:18px;
  border:1px solid rgba(0,0,0,.1); display:grid; place-items:center;
}

/* Thin strike */
.line-through-thin { text-decoration:line-through; text-decoration-thickness:1.5px; text-underline-offset:2px; }

/* Loading overlay */
.loading-overlay {
  position: fixed; inset: 0; z-index: 9999;
  background: rgba(11, 12, 16, 0.95);
  backdrop-filter: blur(8px);
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  gap: 16px;
}

.loading-overlay.hidden { display: none; }

.loading-spinner {
  width: 48px; height: 48px;
  border: 4px solid rgba(17, 197, 198, 0.2);
  border-top-color: #11c5c6;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading-text {
  color: #fff;
  font-size: 14px;
  font-weight: 600;
}

/* reduce motion */
@media (prefers-reduced-motion: reduce) { * { animation: none !important; transition: none !important; } }
